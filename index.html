<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Watson Persona Chat</title>
    <style>
      /* ... (keep your existing CSS styles) ... */
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Watson Persona</h1>

      <div class="chat-area">
        <div id="messages">
          <div class="message system">
            Hi! I'm <strong>Watson</strong>, your AI persona. Start chatting!
          </div>
        </div>
        <div class="input-area">
          <input type="text" id="chatInput" placeholder="Ask Watson anything..." />
          <button id="sendBtn">Send</button>
        </div>
      </div>
      <div style="margin-top:20px; text-align:center; font-size:0.95em; color:#aaa;">
        Powered by Persona â€“ create and talk to your own persona, not just a space!
      </div>
    </div>

    <script>
      // --- JavaScript Section ---
      const messagesDiv = document.getElementById("messages");
      const chatInput = document.getElementById("chatInput");
      const sendBtn = document.getElementById("sendBtn");

      // Watson's keyword responses
      const responses = {
        hello: "Hello! I'm Watson, your AI persona.",
        hi: "Hi! Watson here, ready to chat.",
        "how are you": "I'm Watson, always running at full capacity!",
        name: "I'm Watson, your AI persona.",
        persona: "A persona is your own personal chat experience with me, Watson.",
        joke: "Why did the computer go to the doctor? Because it had a byte!",
        default: "I'm Watson, your AI persona. Ask me anything or tell me about your day!",
      };

      // Sensitive words list for safety filter
      const sensitiveWords = [
        "bomb","attack","kill","harm",
        "weapon","destroy","explode",
        "danger","violence","illegal"
      ];

      function displayMessage(text, sender) {
        const messageElement = document.createElement("div");
        messageElement.classList.add("message", sender);
        messageElement.textContent = text;
        messagesDiv.appendChild(messageElement);
        messagesDiv.scrollTop = messagesDiv.scrollHeight; // Scroll to bottom
      }

      function generateBotResponse(userInput) {
        const lowerInput = userInput.toLowerCase();

        // Safety filter
        for (const word of sensitiveWords) {
          if (lowerInput.includes(word)) {
            return "Sorry, I can't discuss topics involving harm or illegal activities.";
          }
        }

        // Keyword-based responses
        for (const keyword in responses) {
          if (lowerInput.includes(keyword)) {
            return responses[keyword];
          }
        }

        // Default response
        return responses.default;
      }

      function handleSendMessage() {
        const userInput = chatInput.value.trim();
        if (userInput === "") return;

        displayMessage(userInput, "user");
        chatInput.value = "";

        const botResponse = generateBotResponse(userInput);
        displayMessage(botResponse, "ai");
      }

      sendBtn.addEventListener("click", handleSendMessage);
      chatInput.addEventListener("keypress", (event) => {
        if (event.key === "Enter") {
          handleSendMessage();
        }
      });
    </script>
  </body>
</html>
